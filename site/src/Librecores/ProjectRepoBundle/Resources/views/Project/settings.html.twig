{% extends 'layout.html.twig' %}

{% block title %}
{{ project.getFullName() }} @ LibreCores: Settings
{% endblock %}

{% block pagepath %}Home &raquo; Projects &raquo; {{ project.getFullName() }} &raquo; Settings{% endblock %}

{% block content %}
<h1 class="projectname"><a href="{{ path('librecores_project_repo_project_view', {'parentName':
  project.getParentName(), 'projectName': project.getName()}) }}">{{ project.getFullName() }}</a>: Settings</h1>

<div class="row">
<div class="col-sm-2">
  <ul class="list-group">
    <li class="list-group-item"><a href="{{ path('librecores_project_repo_project_view', {'parentName':
  project.getParentName(), 'projectName': project.getName()}) }}">
      <i class="fa fa-bookmark fa-fw"></i>
      Project
    </a></li>
    <li class="list-group-item active"><a href="#">
      <i class="fa fa-cogs fa-fw"></i>Settings
    </a></li>
  </ul>
</div>
<div class="col-sm-10">

{{ form_start(form) }}
  {{ form_errors(form) }}

  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Tagline</h3>
    </div>
    <div class="panel-body">
      <p><i>A short and to-the-point (140 characters or less) description what this project is all about.</i></p>

      {{  form_row(form.tagline, {'label': false}) }}
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Description</h3>
    </div>
    <div class="panel-body">
      <p><i>This is the description that will be visible on the project description page. You have the choice between
      loading it from the README, README.md, README.asc or similar file in your source repository, or editing it manually.</i></p>
      <p class="bg-warning panel-body"><i><strong>Important:</strong>
        If you switch between the two options, be careful: Switching from "Extract the project description" to
        "Enter the project description" will result in asynchronous descriptions. The content at your repository
        will not be updated with the content you enter here.</i></p>
      {{  form_row(form.descriptionTextAutoUpdate, {'label': false}) }}
      <div id="descriptionText_div"
           style="padding-left: 15px; display: {% if form.vars.value.descriptionTextAutoUpdate %}none{% else %}block{% endif %};">
        {{ form_row(form.descriptionText, {'attr': {'data-provide': 'markdown'}}) }}
      </div>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Resources</h3>
    </div>
    <div class="panel-body">
     <p><i>Those are the links from the LibreCores project overview to your resources.</i></p>
      {{ form_row(form.projectUrl) }}
      {{ form_row(form.issueTracker) }}
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Source Code Repository</h3>
    </div>
    <div class="panel-body">
    <p><i>The link to your source code repository. This will be added as link on the project overview and
    will be used to automatically extract information if chosen.</i></p>
      {{ form_row(form.sourceRepo, {'label': false}) }}
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">License</h3>
    </div>
    <div class="panel-body">
      {{ form_row(form.licenseName) }}

      {{ form_row(form.licenseTextAutoUpdate) }}
      <div id="licenseText_div" style="padding-left: 15px; display: {% if  form.vars.value.licenseTextAutoUpdate %}none{% else %}block{% endif %};">
        {{ form_row(form.licenseText, {'attr': {'data-provide': 'markdown'}}) }}
      </div>
    </div>
  </div>
{{ form_end(form) }}
{% endblock %}

{% block pagejs %}
$(document).ready(function(){
  /* toggle text boxes in respect to the auto update settings */
  $('#{{ form.descriptionTextAutoUpdate.vars.id }}').on('change', function() {
    var au = $('input[name="{{ form.descriptionTextAutoUpdate.vars.full_name }}"]:checked').val() == '1';
    var el = $('#descriptionText_div');
    au ? el.hide() : el.show();
  });
  $('#{{ form.licenseTextAutoUpdate.vars.id }}').on('change', function() {
    var au = $('input[name="{{ form.licenseTextAutoUpdate.vars.full_name }}"]:checked').val() == '1';
    var el = $('#licenseText_div');
    au ? el.hide() : el.show();
  });
});
{% endblock %}
