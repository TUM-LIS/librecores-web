{% extends 'layout.html.twig' %}

{# include trumbowyg CSS/JS #}
{% block stylesheets %}
  {% stylesheets filter="scssphp,cssrewrite"
      "assets/scss/trumbowyg.scss"
  %}
    <link rel="stylesheet" href="{{ asset_url }}" />
  {% endstylesheets %}
  {{ parent() }}
{% endblock %}

{% block javascripts %}
  {{ parent() }}
  {% javascripts filter="?jsqueeze"
    "assets/js/trumbowyg.min.js"
    "assets/js/classification.js"
  %}
    <script src="{{ asset_url }}"></script>
  {% endjavascripts %}
{% endblock %}


{% block title %}
{{ project.getFullName() }} @ LibreCores: Update Classification
{% endblock %}

{% block pagepath %}Home &raquo; Projects &raquo; {{ project.getFullName() }} &raquo; Update Classification{% endblock %}

{% block content %}
<h1 class="projectname"><a href="{{ path('librecores_project_repo_project_view', {'parentName':
  project.getParentName(), 'projectName': project.getName()}) }}">{{ project.getFullName() }}</a>: Update</h1>

<div class="row">
  <div class="col-sm-2">
    <ul class="list-group">
      <li class="list-group-item"><a href="{{ path('librecores_project_repo_project_view', {'parentName':
          project.getParentName(), 'projectName': project.getName()}) }}">
          <i class="fa fa-bookmark fa-fw"></i>
          Project
        </a></li>
      <li class="list-group-item active"><a href="{{ path('librecores_project_repo_project_settings', {'parentName':
          project.getParentName(), 'projectName': project.getName()}) }}">
          <i class="fa fa-cogs fa-fw"></i>Settings
        </a></li>
    </ul>
  </div>
  <div class="col-sm-10">

    {{ form_start(form) }}
      {{ form_errors(form) }}
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Update Project Classification</h3>
        </div>
        <div class="panel-body classification-hierarchy">
          <div class="classification-system">
            <select id="category-1" class="classification-category">
              <option value="NULL" data-parentId="NULL">select a category</option>
            </select>
          </div>
          <a href="" class="close-category" data-toggle="tooltip" data-placement="bottom" title="Remove the last child category"><i class="fa fa-close"></i></a>
          <a href="" class="add-category" data-toggle="tooltip" data-placement="bottom" title="Add child category" ><i class="fa fa-plus"></i></a>
        </div>
      </div>

    {{ form_end(form) }}
  </div>
</div>

{% endblock %}

{% block pagejs %}

$(document).ready(function(){
  $.trumbowyg.svgPath = '/img/trumbowyg-icons.svg';

  var trumbowyg_config = {
    btns: [
      ['formatting'],
      'btnGrp-semantic',
      ['link'],
      ['insertImage'],
      'btnGrp-lists',
      ['horizontalRule'],
      ['removeformat'],
      ['viewHTML'],
      ['fullscreen']
    ]
  };
  var classificationDetails = {{ classificationHierarchy|json_encode|raw }}
  updateClassification(classificationDetails, "{{ project.getParentName() }}", "{{ project.getName() }}");
});
{% endblock %}
